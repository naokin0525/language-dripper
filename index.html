<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conlang Generator - 人工言語生成ツール</title>
    <script src="https://cdn.tailwindcss.com/3.4.17"></script>
    <style>
        :root {
            --bg-color: #1a202c;
            --text-color: #e2e8f0;
            --panel-bg: #2d3748;
            --control-bg: #4a5568;
            --accent-color: #4299e1;
            --border-color: #4a5568;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
        }

        .panel {
            background-color: var(--panel-bg);
            border-radius: 0.5rem;
            padding: 1.5rem;
        }

        details>summary {
            cursor: pointer;
            font-weight: 600;
            padding: 0.5rem;
            border-radius: 0.25rem;
            transition: background-color 0.2s;
        }

        details>summary:hover {
            background-color: var(--control-bg);
        }

        details[open]>summary {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.25rem;
            font-size: 0.875rem;
            font-weight: 500;
        }

        input[type="text"],
        textarea,
        select,
        input[type="number"] {
            width: 100%;
            background-color: var(--control-bg);
            border: 1px solid var(--border-color);
            border-radius: 0.25rem;
            padding: 0.5rem;
            color: var(--text-color);
        }

        textarea {
            min-height: 100px;
            font-family: "Menlo", "Monaco", monospace;
        }

        .btn {
            padding: 0.5rem 1rem;
            border-radius: 0.25rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background-color: var(--accent-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: #2b6cb0;
        }

        .btn-secondary {
            background-color: var(--control-bg);
        }

        .btn-secondary:hover {
            background-color: #718096;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border-color);
            text-align: left;
        }

        th {
            background-color: var(--control-bg);
        }
    </style>
</head>

<body class="p-4 lg:p-8">

    <header class="text-center mb-8">
        <h1 class="text-4xl font-bold">Conlang Generator</h1>
        <p class="text-lg text-gray-400">インタラクティブな人工言語生成ツール</p>
    </header>

    <main class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Left Column: Controls -->
        <div id="controls-panel" class="panel flex flex-col gap-6">
            <h2 class="text-2xl font-bold border-b border-gray-600 pb-2">コントロールパネル</h2>

            <details open>
                <summary class="text-xl">I. 音声・音韻論</summary>
                <div class="flex flex-col gap-4 pl-4 border-l border-gray-600">
                    <div>
                        <label for="consonants">子音 (IPA, スペース区切り)</label>
                        <textarea id="consonants">p t k b d g m n s z h r j w</textarea>
                        <div class="flex gap-2 mt-2">
                            <button class="btn btn-secondary text-sm" data-preset="japanese">日本語風</button>
                            <button class="btn btn-secondary text-sm" data-preset="english">英語風</button>
                            <button class="btn btn-secondary text-sm" data-preset="spanish">スペイン語風</button>
                        </div>
                    </div>
                    <div>
                        <label for="vowels">母音 (IPA, スペース区切り)</label>
                        <textarea id="vowels">a i u e o</textarea>
                    </div>
                    <div>
                        <label for="syllable-structure">音節構造 (カンマ区切り)</label>
                        <input type="text" id="syllable-structure" value="CV,V,CVC">
                    </div>
                    <div class="flex flex-col gap-2">
                        <label class="flex items-center gap-2">
                            <input type="checkbox" id="tones-enabled">
                            <span>声調を有効化</span>
                        </label>
                        <div id="tones-controls" class="pl-6 hidden">
                            <label for="tones-count">声調の数 (2-9)</label>
                            <input type="range" id="tones-count" min="2" max="9" value="3" class="w-full"
                                aria-controls="tones-count-value">
                            <span id="tones-count-value" aria-live="polite">3</span>
                        </div>
                    </div>
                    <div>
                        <label>音韻変化ルール (例: n > m / _p)</label>
                        <div id="phonology-rules-list"></div>
                        <button id="add-phonology-rule" class="btn btn-secondary mt-2 text-sm">+ ルール追加</button>
                    </div>
                </div>
            </details>

            <details open>
                <summary class="text-xl">II. 語彙</summary>
                <div class="flex flex-col gap-4 pl-4 border-l border-gray-600">
                    <div>
                        <label for="semantic-fields">意味分野 (カンマ区切り)</label>
                        <textarea id="semantic-fields">自然,動物,感情,行動,道具,社会,思考,身体,食物,場所</textarea>
                    </div>
                    <div>
                        <label for="lexicon-size">生成する語根の数</label>
                        <input type="number" id="lexicon-size" value="100" min="10" max="1000" class="w-full">
                    </div>
                    <div class="flex items-center gap-2">
                        <input type="checkbox" id="loanwords-enabled">
                        <label for="loanwords-enabled" class="mb-0">借用語をシミュレート</label>
                    </div>
                    <button id="generate-lexicon" class="btn btn-primary">語彙を生成</button>
                </div>
            </details>

            <details open>
                <summary class="text-xl">III. 形態論・統語論</summary>
                <div class="flex flex-col gap-4 pl-4 border-l border-gray-600">
                    <div>
                        <label for="word-order">基本語順</label>
                        <select id="word-order">
                            <option value="SOV" selected>SOV</option>
                            <option value="SVO">SVO</option>
                            <option value="VSO">VSO</option>
                            <option value="VOS">VOS</option>
                            <option value="OVS">OVS</option>
                            <option value="OSV">OSV</option>
                        </select>
                    </div>
                    <div>
                        <label for="adjective-order">形容詞の語順</label>
                        <select id="adjective-order">
                            <option value="AN" selected>形容詞 + 名詞 (a big house)</option>
                            <option value="NA">名詞 + 形容詞 (la maison grande)</option>
                        </select>
                    </div>
                    <div>
                        <label>格標示</label>
                        <div class="flex gap-4">
                            <label><input type="radio" name="case-marking" value="suffix" checked> 接尾辞</label>
                            <label><input type="radio" name="case-marking" value="prefix"> 接頭辞</label>
                            <label><input type="radio" name="case-marking" value="postposition"> 後置詞</label>
                        </div>
                    </div>
                    <div>
                        <label for="irregularity-rate">不規則性 (0-20%)</label>
                        <input type="range" id="irregularity-rate" min="0" max="20" value="5" class="w-full"
                            aria-controls="irregularity-rate-value">
                        <span id="irregularity-rate-value" aria-live="polite">5%</span>
                    </div>
                    <div>
                        <label>名詞の文法性</label>
                        <div class="flex gap-4">
                            <label><input type="radio" name="grammatical-gender" value="none" checked> なし</label>
                            <label><input type="radio" name="grammatical-gender" value="mf"> 男性/女性</label>
                            <label><input type="radio" name="grammatical-gender" value="mfn"> 男性/女性/中性</label>
                        </div>
                    </div>
                    <div>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" id="gender-agreement">
                            <span for="gender-agreement">性の一致を有効化</span>
                        </label>
                    </div>
                    <div>
                        <label>派生形態論 (例: -ness, un-)</label>
                        <div id="derivational-morphemes-list"></div>
                        <button id="add-morpheme" class="btn btn-secondary mt-2 text-sm">+ 接辞追加</button>
                    </div>
                </div>
            </details>
        </div>

        <div id="display-panel" class="panel flex flex-col gap-6">
            <h2 class="text-2xl font-bold border-b border-gray-600 pb-2">ディスプレイパネル</h2>
            <div class="flex gap-2">
                <button id="export-json" class="btn btn-secondary">JSONでエクスポート</button>
                <button id="export-csv" class="btn btn-secondary">CSVでエクスポート</button>
            </div>
            <div>
                <h3 class="text-xl font-semibold mb-2">文法概要</h3>
                <div id="grammar-summary" class="prose prose-invert text-gray-300"></div>
            </div>
            <div>
                <h3 class="text-xl font-semibold mb-2">例文</h3>
                <div id="example-sentences" class="bg-gray-800 p-4 rounded space-y-2"></div>
            </div>
            <div>
                <h3 class="text-xl font-semibold mb-2">辞書</h3>
                <div class="overflow-auto max-h-96">
                    <table id="lexicon-table">
                        <thead>
                            <tr>
                                <th>IPA</th>
                                <th>ローマ字</th>
                                <th>品詞</th>
                                <th>意味</th>
                                <th>文法性</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <script src="app.js" defer></script>

</body>

</html>
